% Fonts + Colors ~~~~

\usepackage{lipsum}
\usepackage{fontspec}
\usepackage{dashrule}
\usepackage[export]{adjustbox}
\usepackage[usenames, dvipsnames]{color}

\definecolor{colorTitle}{RGB}{200, 77, 179}  % Pink
\definecolor{colorSection}{RGB}{102, 153, 255}  % Blue
\definecolor{colorFooter}{RGB}{120, 120, 120}  % Gray
\definecolor{LightPink}{RGB}{200, 30, 38}
\definecolor{LightBlue}{RGB}{165, 195, 255}
\definecolor{LightGray}{RGB}{220, 220, 220}

\newfontfamily\Avenir[
    Path= fonts/,
    Extension= .otf,
    UprightFont = *-45Book,
    ItalicFont = *-45BookOblique,
    BoldFont = *-95Black,
]{AvenirLTStd}

\newfontfamily\TradeGothic[
    Path = fonts/,
    Extension = .otf,
    UprightFont = *-No18,
    BoldFont = *-No20Bold,
]{TradeGothicCondensed}

\setmainfont[Ligatures=TeX]{Avenir}
\Avenir\fontsize{9pt}{12pt}\selectfont


% Formatting ~~~~

\usepackage{geometry}

\geometry{
    letterpaper,
    top=1.75in,
    bottom=1.75in,
    inner=1in,
    outer=1.5in,
    headsep=1in,
    headheight=0.5in,
    footskip=1.2in,
    % showframe
}

\usepackage[document]{ragged2e}
\parskip=12pt
\parindent=0pt

\usepackage{sectsty}
\sectionfont{\color{colorSection}\mdseries\uppercase}
\subsectionfont{\color{Periwinkle}}


% Headers + Footers ~~~~

\usepackage{fancyhdr}
\pagestyle{fancy}

\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\usepackage{fourier-orns}

\fancyhead{} % clear all header fields
\fancyfoot{} % clear all footer fields
\fancyfoot[LE]{\thepage \hspace{0.4cm} \TradeGothic\selectfont\textcolor{colorTitle}{\uppercase{Oh, The Places They'll Go}}}
\fancyfoot[RO]{\TradeGothic\selectfont\textcolor{colorFooter}{\leftmark} \hspace{0.4cm} \thepage}
\renewcommand{\headrulewidth}{0pt}

\fancypagestyle{tablepage}{  % No Header, Regular Footer
    \fancyhead{}
    \fancyfoot{}
    \renewcommand\headrule{\hrulefill
\raisebox{-2.1pt}[10pt][10pt]{\quad\decofourleft\decotwo\decofourright\quad}\hrulefill}
}


% Links + Lists ~~~~

\PassOptionsToPackage{hyphens}{url}\usepackage[colorlinks=true, linkcolor=cyan, urlcolor=blue, citecolor=blue]{hyperref}
\newcommand{\superscript}[1]{$^{#1}$}

\usepackage[super,numbers]{natbib}

\makeatletter
\renewcommand\@biblabel[1]{\superscript{#1}}
\makeatother

\renewcommand{\refname}{\vspace{-0.65cm}}

\usepackage{enumitem}
\setlist{nosep, itemsep=0pt, parsep=0pt, before={\TradeGothic\large\color{Gray}}}

\renewcommand{\labelitemi}{\color{colorTitle}$\triangleright$}
\renewcommand{\labelitemii}{\color{Periwinkle}$\cdot$}
\renewcommand\labelitemiii{$\circ$}


% Block Formats ~~~~

\usepackage{mdframed}

\newenvironment{quote-block}{  % quote block
    \begin{quote}
    \TradeGothic\selectfont
    \color{colorSection}
    \begin{large}
}
{
    \end{large}
    \end{quote}
}

\newenvironment{odd-block}{  % text block for odd-numbered pages
    \vspace{0.5cm}
    \begin{mdframed}[backgroundcolor=LightBlue, linecolor=LightBlue, userdefinedwidth=8in, leftmargin=0cm, innerleftmargin=1cm, innerrightmargin=6cm, innertopmargin=0.5cm, innerbottommargin=1cm]
    \color{white}
}
{
    \end{mdframed}
    \vspace{0.5cm}
}


% Figures ~~~~

\usepackage{graphicx}
\usepackage{caption}

\DeclareCaptionFont{tg}{\TradeGothic\selectfont}
\DeclareCaptionFont{colorTitle}{\color{colorTitle}}

\captionsetup{labelfont={tg, colorTitle}, figurename=FIGURE}

\newcommand{\addFigure}[4][0.75] {  % Add single figure
\begin{figure}[!ht]
    \vspace{0.45cm}
    \centering

    \includegraphics[width=#1\textwidth]{images/#2}
    \caption{\TradeGothic\selectfont\textcolor{colorFooter}{\uppercase{#3}}}
    \label{fig:#4}

\end{figure}
}

\newcommand{\addFigureSet}[3] {  % Add 2x2 figure set
\begin{figure}[!ht]
    \vspace{0.45cm}
    \centering

    \includegraphics[width=0.45\textwidth, cfbox=LightGray 1pt]{images/#1/visit_count}\hfill
    \includegraphics[width=0.45\textwidth, cfbox=LightGray 1pt]{images/#1/timeline}

    \smallskip

    \includegraphics[width=0.45\textwidth, cfbox=LightGray 1pt]{images/#1/median_income}\hfill
    \includegraphics[width=0.45\textwidth, cfbox=LightGray 1pt]{images/#1/income_band}

    \caption{\TradeGothic\selectfont\textcolor{colorFooter}{\uppercase{#2}}}
    \label{fig:#3}

    \vspace{0.45cm}
\end{figure}
}

\newcommand{\addFigureCompare}[2] {  % Add row of 4 figures
\begin{figure}[!h]
    \vspace{0.45cm}
    \hspace{-1.6in}
    \color{Gray}\hdashrule{1.5\textwidth}{1pt}{1pt}\vspace{0.5cm}

    \centering

    \makebox[0.79\paperwidth][c]{\hspace{-3cm}\includegraphics[width=0.2\paperwidth, cfbox=LightGray 1pt]{images/139959/titled_map}\hfill
    \includegraphics[width=0.2\paperwidth, cfbox=LightGray 1pt]{images/110635/titled_map}\hfill
    \includegraphics[width=0.2\paperwidth, cfbox=LightGray 1pt]{images/215293/titled_map}\hfill
    \includegraphics[width=0.2\paperwidth, cfbox=LightGray 1pt]{images/196097/titled_map}}

    \caption{\TradeGothic\selectfont\textcolor{colorFooter}{\uppercase{#1}}}
    \label{fig:#2}
    \makebox[0.79\paperwidth][c]{\hdashrule{1.5\paperwidth}{1pt}{1pt}}

\end{figure}
\vspace{0.45cm}
}
